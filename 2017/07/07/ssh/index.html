<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Struts2,Hibernate,Spring框架学习总结 | kimi | 个人博客</title>

  
  <meta name="author" content="kimi">
  

  
  <meta name="description" content="Here We Are Again">
  

  
  
  <meta name="keywords" content="SSH,Struts2,Spring,Hibernate">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Struts2,Hibernate,Spring框架学习总结"/>

  <meta property="og:site_name" content="kimi"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="kimi" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <embed src="/audio/童话镇.mp3" autostart="true" loop="true" hidden="true"> </embed>
  <div class="site-branding">
	<div>
		<img src="/images/kimi.jpg" style="border-radius:50%;"></img>
	</div>
    <h1 class="site-title">
      <a href="/">kimi</a>
    </h1>
    <p class="site-description">个人博客</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/about">关于我</a></li>
      
        <li><a href="/links">友情链接</a></li>
      
    </ul>
  </nav>
  <a class="bshareDiv" href="http://www.bshare.cn/share">分享按钮</a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=&amp;style=5&amp;fs=4&amp;bgcolor=Purple"></script>
  

</header>

    <main class="site-main posts-loop">
    <article>
  
    
    <h3 class="article-title"><span>Struts2,Hibernate,Spring框架学习总结</span></h3>
    
  

  <!--
  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/07/07/ssh/" rel="bookmark">
        <time class="entry-date published" datetime="2017-07-07T07:10:04.000Z">
          2017-07-07
        </time>
      </a>
    </span>
  </div>
  -->

  

  <div class="article-content">
    <div class="entry">
      
        <p>最近项目比较松，所以又重头温故了下java WEB的知识，而SSH算是比较典型的框架了，值得我们一学，后续继续学习SSM，也就是SpringMVC，Spring，MyBits框架知识；</p>
<p>学习过程是枯燥的，中途好几次想放弃，但还是坚持了下来，没办法，谁让我们选择了这个苦逼的行业；</p>
<p>好了，废话不说了；</p>
<a id="more"></a>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-a5b9a34bc8775ed5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="Struts2介绍："><a href="#Struts2介绍：" class="headerlink" title="Struts2介绍："></a>Struts2介绍：</h2><p>先来一个简短而又清晰的描述：Struts2是一个基于MVC设计模式的Web应用框架，它本质上相当于一个servlet，在MVC设计模式中，Struts2作为控制器(Controller)来建立模型与视图的数据交互。</p>
<p>用我的话来说它就是处理用户发送过来的请求的，然后根据请求跳转不同的界面和执行不同的业务逻辑，不知道这样理解对还是不对哇。当然它的功能远远不止这些，它还可以做到，请求参数的自动封装，文件的上传下载，数据校验，国际化，ognl等等等….</p>
<p>我印象比较深刻的一点就是，它是线程安全的，也就是用户每次访问，它都会实例化一个对象。而传统的servlet是线程不安全的，就是说不管多少用户访问，它的实例永远是一个。这不就帮我们解决了线程安全问题了吗！！！</p>
<p>再此，请允许我复制粘贴一份它的原理图…..</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-ef71884186c4c8ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>具体的大家自行百度，不用谢；</p>
<h2 id="Hibernate介绍："><a href="#Hibernate介绍：" class="headerlink" title="Hibernate介绍："></a>Hibernate介绍：</h2><p>Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装，它将POJO与数据库表建立映射关系，是一个全自动的orm框架，hibernate可以自动生成SQL语句，自动执行，使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。</p>
<p>对我们安卓开发者来说ORM并不是很陌生，当然操作对象比操作原生的sql语句心情舒畅的多，不是吗？</p>
<p>这个框架总体上来说还是比较好理解的，这里说下学习它的重点</p>
<ul>
<li>对象关系映射（一对一，一对多和多对一，多对多）</li>
<li>一级缓存和二级缓存</li>
<li>事务的处理</li>
</ul>
<h2 id="Spring介绍："><a href="#Spring介绍：" class="headerlink" title="Spring介绍："></a>Spring介绍：</h2><h3 id="重点，重点，重点！"><a href="#重点，重点，重点！" class="headerlink" title="重点，重点，重点！"></a>重点，重点，重点！</h3><p>Spring致力于J2EE应用的各层的解决方案，而不是仅仅专注于某一层的方案。可以说Spring是企业应用开发的“一站式”选择，并贯穿表现层、业务层及持久层。然而，Spring并不想取代那些已有的框架，而是与它们无缝地整合。</p>
<p>全体起立，请重复这句话：Spring并不想取代那些已有的框架，而是与它们无缝地整合；</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-aca383f3c2ec6fb9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>Spring框架是这三个中最难理解最难学的一个了，至少我是这么认为的，它很强大，很强大…..</p>
<p>不过总结嘛，还是大概的总结下，最后再表演下它是如何整合其他框架的；</p>
<h3 id="Spring的6大核心功能："><a href="#Spring的6大核心功能：" class="headerlink" title="Spring的6大核心功能："></a>Spring的6大核心功能：</h3><ul>
<li>IOC容器, 解决对象创建及依赖关系；</li>
<li>Spring Web，Spring对web模块的支持，可以与struts整合,让struts的action创建交给spring，spring mvc模式；</li>
<li>Spring DAO，Spring 对jdbc操作的支持，JdbcTemplate模板工具类</li>
<li>SpringORM，spring对orm的支持，既可以与hibernate整合，也可以使用spring的对hibernate操作的封装</li>
<li>Spring AOP，切面编程</li>
<li>SpringEE，spring 对javaEE其他模块的支持</li>
</ul>
<h2 id="SSH框架整合："><a href="#SSH框架整合：" class="headerlink" title="SSH框架整合："></a>SSH框架整合：</h2><h3 id="目标："><a href="#目标：" class="headerlink" title="目标："></a>目标：</h3><ul>
<li>熟悉Struts2，Hibernate，Spring框架整合</li>
<li>简单的增删改查</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-123a9653ba2c9165.gif?imageMogr2/auto-orient/strip" alt="jdfw.gif"></p>
<p>开发工具Eclipse，新建项目SSH，项目目录结构如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-6b809fb7f449af67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>引入Struts2 jar包，Struts2版本为2.3</p>
<ul>
<li>commons-fileupload-1.3.2.jar     Struts核心包</li>
<li>commons-io-2.2.jar     Struts核心包</li>
<li>commons-lang3-3.2.jar     Struts核心包</li>
<li>commons-logging-1.1.3.jar     Struts核心包</li>
<li>freemarker-2.3.22.jar     Struts核心包</li>
<li>javassist-3.11.0.GA.jar     Struts核心包</li>
<li>ognl-3.0.19.jar     Struts核心包</li>
<li>struts2-core-2.3.32.jar     Struts核心包</li>
<li>xwork-core-2.3.32.jar     Struts核心包</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-c7d65526194c8c67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>将Struts2的配置文件copy到src跟目录下，然后在WebContent/WEB-INF/web.xml 配置Struts2的过滤器</p>
<p>struts.xml文件模版如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE struts PUBLIC</div><div class="line">         &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;</div><div class="line">         &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;</div><div class="line">         </div><div class="line">&lt;struts&gt;</div><div class="line">   	 &lt;!-- 引入外部的一个配置文件 --&gt;</div><div class="line">  		  &lt;include file=&quot;com/itkimi/group/action/user_action.xml&quot;&gt;&lt;/include&gt;</div><div class="line">   </div><div class="line">&lt;/struts&gt;</div></pre></td></tr></table></figure></p>
<p>web.xml文件内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</div><div class="line">  &lt;display-name&gt;ssh&lt;/display-name&gt;</div><div class="line">  &lt;welcome-file-list&gt;</div><div class="line">    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</div><div class="line">    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;</div><div class="line">    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</div><div class="line">    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</div><div class="line">    &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;</div><div class="line">    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;</div><div class="line">  &lt;/welcome-file-list&gt;</div><div class="line">  </div><div class="line">  &lt;!-- config struts --&gt;</div><div class="line">  &lt;filter&gt;</div><div class="line">  	&lt;filter-name&gt;struts&lt;/filter-name&gt;</div><div class="line">  	&lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</div><div class="line">  &lt;/filter&gt;</div><div class="line">  </div><div class="line">  &lt;filter-mapping&gt;</div><div class="line">  	&lt;filter-name&gt;struts&lt;/filter-name&gt;</div><div class="line">  	&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</div><div class="line">  &lt;/filter-mapping&gt;</div><div class="line">&lt;/web-app&gt;</div></pre></td></tr></table></figure>
<p>user_action.xml文件内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE struts PUBLIC</div><div class="line">          &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;</div><div class="line">          &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;</div><div class="line">          </div><div class="line">&lt;struts&gt;</div><div class="line">   </div><div class="line">   &lt;package name=&quot;user_modle&quot; extends=&quot;struts-default&quot; namespace=&quot;/user&quot;&gt;</div><div class="line">   		</div><div class="line">   		&lt;action name=&quot;user_*&quot; class=&quot;com.itkimi.group.action.UserAction&quot; method=&quot;&#123;1&#125;&quot;&gt;</div><div class="line">   			&lt;result name=&quot;&#123;1&#125;&quot;&gt;/list.jsp&lt;/result&gt;</div><div class="line">   		&lt;/action&gt;</div><div class="line">   		</div><div class="line">   &lt;/package&gt;</div><div class="line">   </div><div class="line">&lt;/struts&gt;</div></pre></td></tr></table></figure>
<p>UserAction类内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">package com.itkimi.group.action;</div><div class="line"></div><div class="line">import com.opensymphony.xwork2.ActionSupport;</div><div class="line"></div><div class="line">public class UserAction extends ActionSupport&#123;</div><div class="line"></div><div class="line">	</div><div class="line">	public String register()&#123;</div><div class="line">		</div><div class="line">		return &quot;register&quot;;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>逻辑很简单，就是请求<a href="http://localhost:8080/ssh/user/user_register.action的时候转发到到list.jsp页面，配置无误后，启动tomcat，然后在浏览器运行" target="_blank" rel="external">http://localhost:8080/ssh/user/user_register.action的时候转发到到list.jsp页面，配置无误后，启动tomcat，然后在浏览器运行</a></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-fb38490b4b7df84d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h3 id="引入Hibernate框架，版本号为3-6-10："><a href="#引入Hibernate框架，版本号为3-6-10：" class="headerlink" title="引入Hibernate框架，版本号为3.6.10："></a>引入Hibernate框架，版本号为3.6.10：</h3><ul>
<li>hibernate3.jar 核心包</li>
<li>hibernate-jpa-2.0-api-1.0.1.Final.jar 核心包</li>
<li>antlr-2.7.6.jar 核心包</li>
<li>commons-collections-3.1.jar 核心包</li>
<li>dom4j-1.6.1.jar 核心包</li>
<li>javassist-3.12.0.GA.jar 核心包</li>
<li>jta-1.1.jar 核心包</li>
<li>slf4j-api-1.6.1.jar 核心包</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-1b7c4f2c5eced6d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>引入技巧，就是图中圈中的文件夹下所有的jar，当然还有hibernate3.jar文件，以及mysql驱动包.jar 和 c3p0数据库连接池.jar</p>
<p>在src根目录下引入hibernate的配置文件：hibernate.cfg.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&apos;1.0&apos; encoding=&apos;utf-8&apos;?&gt;</div><div class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</div><div class="line">        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</div><div class="line">        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</div><div class="line"></div><div class="line">&lt;hibernate-configuration&gt;</div><div class="line"></div><div class="line">    &lt;session-factory&gt;</div><div class="line"></div><div class="line">        &lt;!-- Database connection settings --&gt;</div><div class="line">        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;</div><div class="line">        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/demo&lt;/property&gt;</div><div class="line">        &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;</div><div class="line">        &lt;property name=&quot;connection.password&quot;&gt;root&lt;/property&gt;</div><div class="line"></div><div class="line">		&lt;!-- c3p0 config --&gt;</div><div class="line">		&lt;property name=&quot;hibernate.connection.provider_class&quot;&gt;org.hibernate.connection.C3P0ConnectionProvider&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;10&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;5000&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;100&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.idle_test_period&quot;&gt;3000&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;3&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;hibernate.c3p0.validate&quot;&gt;false&lt;/property&gt;</div><div class="line">		</div><div class="line">        &lt;!-- SQL dialect --&gt;</div><div class="line">        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;</div><div class="line">        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;</div><div class="line">        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;/session-factory&gt;</div><div class="line"></div><div class="line">&lt;/hibernate-configuration&gt;</div></pre></td></tr></table></figure></p>
<p>简单映射一个用户表：</p>
<p>User.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">package com.itkimi.group.bean;</div><div class="line"></div><div class="line">public class User &#123;</div><div class="line"></div><div class="line">	private int id;</div><div class="line">	private String name;</div><div class="line">	private String address;</div><div class="line">	private int age;</div><div class="line">	private String email;</div><div class="line">	private String phone;</div><div class="line">	</div><div class="line">	public User() &#123;</div><div class="line">		super();</div><div class="line">	&#125;</div><div class="line">	public User(String name, String address, int age, String email, String phone) &#123;</div><div class="line">		super();</div><div class="line">		this.name = name;</div><div class="line">		this.address = address;</div><div class="line">		this.age = age;</div><div class="line">		this.email = email;</div><div class="line">		this.phone = phone;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	public int getId() &#123;</div><div class="line">		return id;</div><div class="line">	&#125;</div><div class="line">	public void setId(int id) &#123;</div><div class="line">		this.id = id;</div><div class="line">	&#125;</div><div class="line">	public String getName() &#123;</div><div class="line">		return name;</div><div class="line">	&#125;</div><div class="line">	public void setName(String name) &#123;</div><div class="line">		this.name = name;</div><div class="line">	&#125;</div><div class="line">	public String getAddress() &#123;</div><div class="line">		return address;</div><div class="line">	&#125;</div><div class="line">	public void setAddress(String address) &#123;</div><div class="line">		this.address = address;</div><div class="line">	&#125;</div><div class="line">	public int getAge() &#123;</div><div class="line">		return age;</div><div class="line">	&#125;</div><div class="line">	public void setAge(int age) &#123;</div><div class="line">		this.age = age;</div><div class="line">	&#125;</div><div class="line">	public String getEmail() &#123;</div><div class="line">		return email;</div><div class="line">	&#125;</div><div class="line">	public void setEmail(String email) &#123;</div><div class="line">		this.email = email;</div><div class="line">	&#125;</div><div class="line">	public String getPhone() &#123;</div><div class="line">		return phone;</div><div class="line">	&#125;</div><div class="line">	public void setPhone(String phone) &#123;</div><div class="line">		this.phone = phone;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>User.hbm.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&apos;1.0&apos; encoding=&apos;utf-8&apos;?&gt;</div><div class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</div><div class="line">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</div><div class="line">&lt;!-- Generated Nov 9, 2006 6:27:53 PM by Hibernate Tools 3.2.0.beta7 --&gt;</div><div class="line">&lt;hibernate-mapping package=&quot;com.itkimi.group.bean&quot;&gt;</div><div class="line"></div><div class="line">	&lt;class name=&quot;User&quot; table=&quot;user&quot;&gt;</div><div class="line"></div><div class="line">		&lt;id name=&quot;id&quot; column=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;</div><div class="line">			&lt;generator class=&quot;native&quot; /&gt;</div><div class="line">		&lt;/id&gt;</div><div class="line"></div><div class="line">		&lt;property name=&quot;name&quot; column=&quot;name&quot; type=&quot;java.lang.String&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;address&quot; column=&quot;address&quot; type=&quot;java.lang.String&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;email&quot; column=&quot;email&quot; type=&quot;java.lang.String&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;phone&quot; column=&quot;phone&quot; type=&quot;java.lang.String&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;age&quot; column=&quot;age&quot; type=&quot;java.lang.Integer&quot;&gt;&lt;/property&gt;</div><div class="line"></div><div class="line">	&lt;/class&gt;</div><div class="line">&lt;/hibernate-mapping&gt;</div></pre></td></tr></table></figure>
<p>进行测试：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">import com.itkimi.group.bean.User;</div><div class="line"></div><div class="line">public class AppTest &#123;</div><div class="line">	</div><div class="line">	private static SessionFactory buildSessionFactory;</div><div class="line">	</div><div class="line">	static &#123;</div><div class="line">		buildSessionFactory = new Configuration()</div><div class="line">				.configure()</div><div class="line">				.addClass(User.class)</div><div class="line">				.buildSessionFactory();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Test</div><div class="line">	public void testAdd()&#123;</div><div class="line">		Session session = buildSessionFactory.openSession();</div><div class="line">		session.beginTransaction();</div><div class="line">		</div><div class="line">		//test add user</div><div class="line">		User user = new User(&quot;itkimi&quot;, &quot;上海市&quot;, 25, &quot;24750@163.com&quot;, &quot;13211111111&quot;);</div><div class="line">		session.save(user);</div><div class="line">		</div><div class="line">		session.getTransaction().commit();</div><div class="line">		session.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-0490afbec18a8106.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2756952-22a911000fa00704.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="Spring框架的引入和整合"><a href="#Spring框架的引入和整合" class="headerlink" title="Spring框架的引入和整合:"></a>Spring框架的引入和整合:</h2><p>Spring</p>
<ul>
<li>spring-beans-3.2.5.RELEASE.jar 核心包</li>
<li>spring-context-3.2.5.RELEASE.jar 核心包</li>
<li>spring-core-3.2.5.RELEASE.jar 核心包</li>
<li>spring-expression-3.2.5.RELEASE.jar 核心包</li>
<li>spring-web-3.2.5.RELEASE.jar 整合struts需要</li>
<li>spring-aop-3.2.5.RELEASE.jar 核心包</li>
<li>spring-jdbc-3.2.5.RELEASE.jar  整合hibernate需要</li>
<li>spring-orm-3.2.5.RELEASE.jar 整合hibernate需要</li>
<li>spring-tx-3.2.5.RELEASE.jar 核心包<br>以及aop相关jar包</li>
<li>aopalliance.jar</li>
<li>aspectjrt.jar</li>
<li>aspectjweaver.jar<br>Struts需要引用的包</li>
<li>struts2-spring-plugin-2.3.32.jar</li>
</ul>
<p>Spring的jar包有些多，但是总体上来说分为六大功能，需要用到什么引入什么就可以了，接下来，在web.xml中增加spring的配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">	xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</div><div class="line">	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</div><div class="line">	id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</div><div class="line">	&lt;display-name&gt;ssh&lt;/display-name&gt;</div><div class="line">	&lt;welcome-file-list&gt;</div><div class="line">		&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</div><div class="line">		&lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;</div><div class="line">		&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</div><div class="line">		&lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</div><div class="line">		&lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;</div><div class="line">		&lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;</div><div class="line">	&lt;/welcome-file-list&gt;</div><div class="line"></div><div class="line">	&lt;!-- config spring --&gt;</div><div class="line">	&lt;filter&gt;</div><div class="line">		&lt;filter-name&gt;OpenSessionInView&lt;/filter-name&gt;</div><div class="line">		&lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter&lt;/filter-class&gt;</div><div class="line">	&lt;/filter&gt;</div><div class="line">	&lt;filter-mapping&gt;</div><div class="line">		&lt;filter-name&gt;OpenSessionInView&lt;/filter-name&gt;</div><div class="line">		&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</div><div class="line">	&lt;/filter-mapping&gt;</div><div class="line"></div><div class="line">	&lt;context-param&gt;</div><div class="line">		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</div><div class="line">		&lt;param-value&gt;classpath:bean.xml&lt;/param-value&gt;</div><div class="line">	&lt;/context-param&gt;</div><div class="line">	&lt;listener&gt;</div><div class="line">		&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</div><div class="line">	&lt;/listener&gt;</div><div class="line"></div><div class="line">	&lt;!-- config struts --&gt;</div><div class="line">	&lt;filter&gt;</div><div class="line">		&lt;filter-name&gt;sturts&lt;/filter-name&gt;</div><div class="line">		&lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</div><div class="line">	&lt;/filter&gt;</div><div class="line">	&lt;filter-mapping&gt;</div><div class="line">		&lt;filter-name&gt;sturts&lt;/filter-name&gt;</div><div class="line">		&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</div><div class="line">	&lt;/filter-mapping&gt;</div><div class="line"></div><div class="line">&lt;/web-app&gt;</div></pre></td></tr></table></figure></p>
<p>contextConfigLocation 配置对应的xml文件，我们在看下bean.xml:</p>
<figure class="highlight plain"><figcaption><span>version="1.0" encoding="UTF-8"?></span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</div><div class="line">	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</div><div class="line">	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</div><div class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</div><div class="line">    	 http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">     	 http://www.springframework.org/schema/context</div><div class="line">         http://www.springframework.org/schema/context/spring-context.xsd</div><div class="line">         http://www.springframework.org/schema/aop</div><div class="line">         http://www.springframework.org/schema/aop/spring-aop.xsd</div><div class="line">         http://www.springframework.org/schema/tx</div><div class="line">     	 http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</div><div class="line">     	 </div><div class="line">	&lt;context:component-scan base-package=&quot;com.itkimi&quot; &gt;&lt;/context:component-scan&gt;</div><div class="line">		</div><div class="line"></div><div class="line">	&lt;!-- datasource c3po数据库连接池配置--&gt;</div><div class="line">	&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</div><div class="line">		&lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/demo&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;initialPoolSize&quot; value=&quot;3&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;maxPoolSize&quot; value=&quot;10&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;maxStatements&quot; value=&quot;100&quot;&gt;&lt;/property&gt;</div><div class="line">		&lt;property name=&quot;acquireIncrement&quot; value=&quot;2&quot;&gt;&lt;/property&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	&lt;!-- sessionFactory 整合hibernate时用到的sessionfactory--&gt;</div><div class="line">	&lt;bean id=&quot;sessionFactory&quot;</div><div class="line">		class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;</div><div class="line">		&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</div><div class="line">		</div><div class="line">		&lt;!-- hibernate properties config hibernate属性配置--&gt;</div><div class="line">		&lt;property name=&quot;hibernateProperties&quot;&gt;</div><div class="line">			&lt;props&gt;</div><div class="line">				&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;</div><div class="line">				&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;</div><div class="line">				&lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;</div><div class="line">			&lt;/props&gt;</div><div class="line">		&lt;/property&gt;</div><div class="line"></div><div class="line">		&lt;!-- hibernate mapping file hibernate映射文件加载--&gt;</div><div class="line">		&lt;property name=&quot;mappingLocations&quot;&gt;</div><div class="line">			&lt;list&gt;</div><div class="line">				&lt;value&gt;classpath:com/itkimi/group/bean/*.hbm.xml&lt;/value&gt;</div><div class="line">			&lt;/list&gt;</div><div class="line">		&lt;/property&gt;</div><div class="line"></div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	&lt;!-- config translation 事务控制--&gt;</div><div class="line">	&lt;bean id=&quot;txManager&quot;</div><div class="line">		class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;</div><div class="line">		&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;&gt;&lt;/property&gt;</div><div class="line">	&lt;/bean&gt;</div><div class="line"></div><div class="line">	</div><div class="line">	&lt;tx:advice id=&quot;tvAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;</div><div class="line">		&lt;tx:attributes&gt;</div><div class="line">			&lt;tx:method name=&quot;*&quot; read-only=&quot;false&quot; /&gt;</div><div class="line">		&lt;/tx:attributes&gt;</div><div class="line">	&lt;/tx:advice&gt;</div><div class="line"></div><div class="line">	&lt;!-- aop config --&gt;</div><div class="line">	&lt;aop:config&gt;</div><div class="line">		&lt;aop:pointcut expression=&quot;execution(* com.itkimi.group.service.*.*(..))&quot;</div><div class="line">			id=&quot;pt&quot; /&gt;</div><div class="line">		&lt;aop:advisor advice-ref=&quot;tvAdvice&quot; pointcut-ref=&quot;pt&quot; /&gt;</div><div class="line">	&lt;/aop:config&gt;</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure>
<p>到这里，基本上三大框架整合就完毕了，接下来开始写action，service，dao了，直接上代码了。<br>UserAction.java:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">package com.itkimi.group.action;</div><div class="line">	</div><div class="line">import java.util.List;</div><div class="line">import java.util.Map;</div><div class="line">	</div><div class="line">import javax.annotation.Resource;</div><div class="line">	</div><div class="line">import org.springframework.context.annotation.Scope;</div><div class="line">import org.springframework.stereotype.Controller;</div><div class="line">	</div><div class="line">import com.itkimi.group.bean.User;</div><div class="line">import com.itkimi.group.service.IUserService;</div><div class="line">import com.opensymphony.xwork2.ActionContext;</div><div class="line">import com.opensymphony.xwork2.ActionSupport;</div><div class="line">import com.opensymphony.xwork2.util.ValueStack;</div><div class="line"></div><div class="line">@Controller(&quot;userAction&quot;)</div><div class="line">@Scope(&quot;prototype&quot;)</div><div class="line">public class UserAction extends ActionSupport&#123;</div><div class="line"></div><div class="line">	@Resource(name = &quot;userServiceImp&quot;)</div><div class="line">	private IUserService userService;</div><div class="line">	public void setUserService(IUserService userService) &#123;</div><div class="line">		this.userService = userService;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	private User user;</div><div class="line">	public User getUser() &#123;</div><div class="line">		return user;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setUser(User user) &#123;</div><div class="line">		this.user = user;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//注册</div><div class="line">	public String register()&#123;</div><div class="line">		userService.add(user);</div><div class="line">		return &quot;index&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//登陆</div><div class="line">	public String login()&#123;</div><div class="line">		User u = userService.findUser(user);</div><div class="line">		if(u != null)&#123;</div><div class="line">			return &quot;loginSuccess&quot;;</div><div class="line">		&#125;</div><div class="line">		return &quot;index&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//列表</div><div class="line">	public String list()&#123;</div><div class="line">		List&lt;User&gt; userAll = userService.findAll();</div><div class="line">		Map&lt;String, Object&gt; contextMap = ActionContext.getContext().getContextMap();</div><div class="line">		contextMap.put(&quot;list&quot;, userAll);</div><div class="line">		return &quot;listJsp&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//删除</div><div class="line">	public String delete()&#123;</div><div class="line">		User findUser = userService.findUser(user.getId());</div><div class="line">		userService.remove(findUser);</div><div class="line">		return &quot;loginSuccess&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//修改</div><div class="line">	public String update()&#123;</div><div class="line">		user = userService.findUser(user.getId());</div><div class="line">		return &quot;update&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	public String updateComplete()&#123;</div><div class="line">		userService.update(user);</div><div class="line">		return &quot;loginSuccess&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>user_action.xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE struts PUBLIC</div><div class="line">          &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;</div><div class="line">          &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;</div><div class="line">          </div><div class="line">&lt;struts&gt;</div><div class="line">   </div><div class="line">   &lt;package name=&quot;user_modle&quot; extends=&quot;struts-default&quot; namespace=&quot;/user&quot;&gt;</div><div class="line">   		</div><div class="line">   		&lt;action name=&quot;user_*&quot; class=&quot;userAction&quot; method=&quot;&#123;1&#125;&quot;&gt;</div><div class="line">   			&lt;result name=&quot;&#123;1&#125;&quot;&gt;/&#123;1&#125;.jsp&lt;/result&gt;</div><div class="line">   			&lt;result name=&quot;index&quot; type=&quot;redirect&quot;&gt;/index.jsp&lt;/result&gt;</div><div class="line">   			&lt;result name=&quot;listJsp&quot;&gt;/list.jsp&lt;/result&gt;</div><div class="line">   			&lt;result name=&quot;loginSuccess&quot; type=&quot;redirectAction&quot;&gt;user_list&lt;/result&gt;</div><div class="line">   		&lt;/action&gt;</div><div class="line">   		</div><div class="line">   &lt;/package&gt;</div></pre></td></tr></table></figure>
<p>UserServiceImp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">package com.itkimi.group.service.imp;</div><div class="line"></div><div class="line">import java.io.Serializable;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import javax.annotation.Resource;</div><div class="line"></div><div class="line">import org.springframework.stereotype.Service;</div><div class="line"></div><div class="line">import com.itkimi.group.bean.User;</div><div class="line">import com.itkimi.group.dao.IUserDao;</div><div class="line">import com.itkimi.group.service.IUserService;</div><div class="line"></div><div class="line">@Service(&quot;userServiceImp&quot;)</div><div class="line">public class UserServiceImp implements IUserService &#123;</div><div class="line">	</div><div class="line">	@Resource(name = &quot;userDaoImp&quot;)</div><div class="line">	private IUserDao userDao;</div><div class="line">	public void setUserDao(IUserDao userDao) &#123;</div><div class="line">		this.userDao = userDao;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void add(User user) &#123;</div><div class="line">		userDao.add(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void remove(User user) &#123;</div><div class="line">		userDao.remove(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void update(User user) &#123;</div><div class="line">		userDao.update(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public User findUser(Serializable id) &#123;</div><div class="line">		return userDao.findUser(id);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public List&lt;User&gt; findAll() &#123;</div><div class="line">		return userDao.findAll();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public User findUser(User user) &#123;</div><div class="line">		return userDao.findUser(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>UserDaoImp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">package com.itkimi.group.dao.imp;</div><div class="line"></div><div class="line">import java.io.Serializable;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import javax.annotation.Resource;</div><div class="line"></div><div class="line">import org.hibernate.Query;</div><div class="line">import org.hibernate.SessionFactory;</div><div class="line">import org.hibernate.classic.Session;</div><div class="line">import org.springframework.stereotype.Repository;</div><div class="line"></div><div class="line">import com.itkimi.group.bean.User;</div><div class="line">import com.itkimi.group.dao.IUserDao;</div><div class="line"></div><div class="line">@Repository(&quot;userDaoImp&quot;)</div><div class="line">public class UserDaoImp implements IUserDao&#123;</div><div class="line"></div><div class="line">	@Resource(name = &quot;sessionFactory&quot;)</div><div class="line">	private SessionFactory sessionFactory;</div><div class="line">	public void setSessionFactory(SessionFactory sessionFactory) &#123;</div><div class="line">		this.sessionFactory = sessionFactory;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@Override</div><div class="line">	public void add(User user) &#123;</div><div class="line">		sessionFactory.getCurrentSession().save(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void remove(User user) &#123;</div><div class="line">		sessionFactory.getCurrentSession().delete(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void update(User user) &#123;</div><div class="line">		sessionFactory.getCurrentSession().update(user);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public User findUser(Serializable id) &#123;</div><div class="line">		return (User) sessionFactory.getCurrentSession().get(User.class, id);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public List&lt;User&gt; findAll() &#123;</div><div class="line">		Session session = sessionFactory.getCurrentSession();</div><div class="line">		return session.createQuery(&quot;from User&quot;).list();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public User findUser(User user) &#123;</div><div class="line">		Session session = sessionFactory.getCurrentSession();</div><div class="line">		Query createQuery = session.createQuery(&quot;from User u where u.name=? and u.password=?&quot;);</div><div class="line">		createQuery.setString(0, user.getName());</div><div class="line">		createQuery.setString(1, user.getPassword());</div><div class="line">		User u = (User) createQuery.uniqueResult();</div><div class="line">		return u;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>编写过程中遇到的问题总结，在开启Spring注解扫描的时候，启动tomcat莫名其妙的报错，百度了下也没找到答案，无意中将jdk 1.8切换为1.7此问题就解决了，可能造成的原因，某些jar包不是最新的吧；</p>
<p>好了，总结就到这里，相信以后回过头复习会更加深入理解。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/JavaWeb/">JavaWeb</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/SSH/">SSH</a><a href="/tags/Struts2/">Struts2</a><a href="/tags/Spring/">Spring</a><a href="/tags/Hibernate/">Hibernate</a>
    </span>
    

    </div>

	<!-- 第三方评论 -->
    
  </div>
</article>

  
	<div id="comment">
		
		
	<div id="SOHUCS" sid="http://www.itkimi.com/2017/07/07/ssh/" ></div> 
	<script type="text/javascript"> 
	(function(){ 
	var appid = 'cyt6iEBkx'; 
	var conf = 'prod_46bee0d54fc91810c69f29fcca034697'; 
	var width = window.innerWidth || document.documentElement.clientWidth; 
	if (width < 960) { 
	window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
		
		
	<!--
	
	 <div class="ds-thread" data-thread-key="/2017/07/07/ssh/" data-title="Struts2,Hibernate,Spring框架学习总结" data-url="http://www.itkimi.com/2017/07/07/ssh/"></div>
	
	-->
	</div>




    </main>

    <footer class="site-footer">
  <div>
	<a href="https://github.com/andmizi" target="_blank" style="font-size:20px;">
		Github
	</a>
	<a href="http://www.jianshu.com/u/6edc22b4da83" target="_blank" style="font-size:20px;">
		Jianshu
	</a>
	<a href="http://blog.csdn.net/qq_28268507?viewmode=list" target="_blank" style="font-size:20px;">
		CSDN
	</a>
  </div>
  
  <div>
	<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1262826986'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/stat.php%3Fid%3D1262826986%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>  
  </div>

  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 kimi
    
	</br>
	豫ICP证: <a href="http://www.miitbeian.gov.cn/" target="_blank">17020696</a> 号
  </p>
</footer>
    
  </div>
</div>
</body>
</html>